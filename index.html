<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dinel - –î–æ—Å—Ç–∞–≤–∫–∞ –µ–¥—ã</title>
    <link rel="stylesheet" href="/style.css">
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Telegram WebApp SDK –ø–µ—Ä–≤—ã–º -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º app.js —Å defer -->
    <script src="/app.js" defer></script>
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
        .category-btn {
            transition: transform 0.2s, background-color 0.2s;
        }
        .category-btn:active {
            transform: scale(0.98);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <img src="/assets/logo.jpg" alt="Dinel" class="logo">
            <h1>Dinel - –î–æ—Å—Ç–∞–≤–∫–∞ –µ–¥—ã</h1>
            <p>–ë—ã—Å—Ç—Ä–æ, –≤–∫—É—Å–Ω–æ, –Ω–∞–¥–µ–∂–Ω–æ</p>
        </header>

        <main>
            <section class="categories">
                <h2>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:</h2>
                <div class="category-buttons">
                    <button class="category-btn" data-category="burgers" id="burgers-btn">
                        üçî –ë—É—Ä–≥–µ—Ä—ã
                    </button>
                    <button class="category-btn" data-category="pizza" id="pizza-btn">
                        üçï –ü–∏—Ü—Ü–∞
                    </button>
                    <button class="category-btn" data-category="sushi" id="sushi-btn">
                        üç£ –°—É—à–∏
                    </button>
                </div>
            </section>
        </main>

        <div class="cart-footer">
            <button class="cart-btn" id="cart-btn">
                üõí –ö–æ—Ä–∑–∏–Ω–∞ (<span id="cart-count">0</span>)
            </button>
            <button class="checkout-btn" id="checkout-btn">
                –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
            </button>
        </div>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ -->
    <script>
        // –ñ–¥–µ–º –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        document.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            console.log('–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π:', {
                openCategory: typeof window.openCategory,
                openCart: typeof window.openCart
            });

            // –í–µ—à–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —á–µ—Ä–µ–∑ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
            document.addEventListener('click', function(e) {
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
                if (e.target.closest('.category-btn')) {
                    const btn = e.target.closest('.category-btn');
                    const category = btn.dataset.category;
                    console.log('–í—ã–±—Ä–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è:', category);
                    
                    if (typeof window.openCategory === 'function') {
                        window.openCategory(category);
                    } else {
                        console.error('–§—É–Ω–∫—Ü–∏—è openCategory –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞');
                        // Fallback –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–Ω–µ Telegram
                        window.location.href = `/menu/index.html?category=${encodeURIComponent(category)}`;
                    }
                }

                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã
                if (e.target.id === 'cart-btn' || e.target.closest('#cart-btn')) {
                    console.log('–û—Ç–∫—Ä—ã—Ç–∏–µ –∫–æ—Ä–∑–∏–Ω—ã');
                    
                    if (typeof window.openCart === 'function') {
                        window.openCart();
                    } else {
                        console.error('–§—É–Ω–∫—Ü–∏—è openCart –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞');
                        // Fallback –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–Ω–µ Telegram
                        window.location.href = '/cart/index.html';
                    }
                }

                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
                if (e.target.id === 'checkout-btn' || e.target.closest('#checkout-btn')) {
                    console.log('–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞');
                    
                    if (typeof window.sendOrderToBot === 'function') {
                        window.sendOrderToBot();
                    } else {
                        console.error('–§—É–Ω–∫—Ü–∏—è sendOrderToBot –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞');
                        alert('–§—É–Ω–∫—Ü–∏—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
                    }
                }
            });

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä–∑–∏–Ω—ã
            if (typeof window.updateCartCount === 'function') {
                window.updateCartCount();
            }
        });
    </script>
</body>
</html>